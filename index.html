<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Video Player</title>
  <meta name="description" content="Simple video player with autoplay, background, description, download and player controls">
  <style>
    :root{--card-bg:rgba(0,0,0,0.66);--muted:#9aa6b2}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:url('background.jpg') no-repeat center center fixed;background-size:cover;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;color:#eee}
    .overlay{position:fixed;inset:0;background:linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55));z-index:0}
    .container{position:relative;z-index:1;width:min(980px,95%);margin:28px auto}
    .card{background:var(--card-bg);padding:18px;border-radius:12px;box-shadow:0 12px 40px rgba(0,0,0,.6);backdrop-filter:blur(6px)}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{font-size:18px;margin:0}
    .meta{font-size:13px;color:var(--muted)}

    /* video area */
    .media-wrap{margin-top:12px;position:relative}
    .video-frame, video{width:100%;aspect-ratio:16/9;max-height:620px;border-radius:8px;background:#000;display:block}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;padding:10px;margin-top:10px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01))}

    /* left controls */
    .left{display:flex;gap:8px;align-items:center}
    .btn{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.04);padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer}
    .btn.small{padding:6px 8px;font-size:14px}
    .progress{flex:1;height:8px;background:rgba(255,255,255,.06);border-radius:6px;position:relative;overflow:hidden;margin:0 12px}
    .progress > .bar{position:absolute;left:0;top:0;height:100%;width:0%;background:linear-gradient(90deg,#4f46e5,#06b6d4)}

    /* right controls */
    .right{display:flex;gap:8px;align-items:center}
    .volume{display:flex;gap:6px;align-items:center}
    input[type=range]{accent-color:#4f46e5}

    .description{margin-top:14px;background:rgba(255,255,255,0.03);padding:12px;border-radius:8px;color:#d0d0d0}
    .download{display:inline-flex;align-items:center;gap:8px;text-decoration:none;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.04);background:rgba(255,255,255,.03);color:inherit}

    .hint{font-size:13px;color:var(--muted);margin-top:8px}

    /* responsive tweaks */
    @media (max-width:640px){
      .controls{flex-direction:column;align-items:stretch}
      .progress{margin:10px 0}
    }
  </style>
</head>
<body>
  <div class="overlay" aria-hidden="true"></div>

  <div class="container">
    <section class="card" aria-label="Video player card">
      <header>
        <div>
          <h1 id="title">Simple Video Player</h1>
          <div class="meta" id="meta">Autoplay enabled Â· Press <kbd>Space</kbd> to play/pause</div>
        </div>
        <div>
          <a id="downloadBtn" class="download" href="video.mp4" download>Download Video</a>
        </div>
      </header>

      <div class="media-wrap" id="mediaWrap" data-youtube="29Jn9il7QtQ">
        <!-- If data-youtube is set we use YouTube iframe + API. Otherwise a local <video> element is used. -->
        <video id="player" class="player" playsinline preload="auto" controls crossorigin>
          <source src="video.mp4" type="video/mp4">
          Your browser doesn't support HTML5 video.
        </video>
      </div>

      <div class="controls" role="group" aria-label="Player controls">
        <div class="left">
          <button id="playPause" class="btn small" aria-label="Play/Pause">Play</button>
          <button id="rew" class="btn small" title="Rewind 10s">Â« 10s</button>
          <button id="fwd" class="btn small" title="Forward 10s">10s Â»</button>
          <div class="progress" id="progress" aria-label="Playback progress">
            <div class="bar" id="progressBar"></div>
          </div>
          <div class="time meta" id="time">0:00 / 0:00</div>
        </div>

        <div class="right">
          <div class="volume">
            <button id="muteBtn" class="btn small" aria-label="Mute/Unmute">ğŸ”Š</button>
            <input id="vol" type="range" min="0" max="1" step="0.01" value="1" aria-label="Volume">
          </div>
          <select id="speed" class="btn small" aria-label="Playback speed">
            <option value="0.5">0.5Ã—</option>
            <option value="0.75">0.75Ã—</option>
            <option value="1" selected>1Ã—</option>
            <option value="1.25">1.25Ã—</option>
            <option value="1.5">1.5Ã—</option>
            <option value="2">2Ã—</option>
          </select>
          <button id="pip" class="btn small" title="Picture in Picture">PIP</button>
          <button id="fs" class="btn small" title="Fullscreen">â¤¢</button>
        </div>
      </div>

      <div class="description" id="description">
        <strong>Video Description</strong>
        <p id="descText">This is a sample area where you can write about your video. Describe what itâ€™s about, who made it, when it was created, or any interesting details you want visitors to know. You can write multiple paragraphs or include links, contact info, or credits.</p>
      </div>

      <div class="hint">Keyboard shortcuts: <strong>Space</strong>=play/pause Â· <strong>â† / â†’</strong>=seek 5s Â· <strong>F</strong>=fullscreen Â· <strong>M</strong>=mute</div>
    </section>
  </div>

  <script>
    /* Enhanced player: supports both local video and YouTube embed with API so controls work.
       Key fixes from previous version:
       - iframe uses YouTube IFrame API so buttons (play/pause/seek/volume/speed) control the YouTube player.
       - iframe now fills area using aspect-ratio and responsive styles.
       - Progress bar is updated by polling YouTube player state when using iframe.
    */

    const mediaWrap = document.getElementById('mediaWrap');
    const youtubeId = mediaWrap.dataset.youtube || '';
    const origVideoEl = document.getElementById('player');
    const playPauseBtn = document.getElementById('playPause');
    const rewBtn = document.getElementById('rew');
    const fwdBtn = document.getElementById('fwd');
    const progress = document.getElementById('progress');
    const progressBar = document.getElementById('progressBar');
    const timeEl = document.getElementById('time');
    const vol = document.getElementById('vol');
    const muteBtn = document.getElementById('muteBtn');
    const speed = document.getElementById('speed');
    const pipBtn = document.getElementById('pip');
    const fsBtn = document.getElementById('fs');
    const downloadBtn = document.getElementById('downloadBtn');

    let player = origVideoEl; // either HTMLVideoElement or YT.Player instance
    let isYouTube = false;
    let ytPolling = null;

    function formatTime(s){ if(!isFinite(s)) return '0:00'; const m = Math.floor(s/60); const sec = Math.floor(s%60); return m + ':' + String(sec).padStart(2,'0'); }

    if(youtubeId){
      // replace local video with iframe and load YT API
      isYouTube = true;
      downloadBtn.style.display = 'none';
      document.getElementById('meta').textContent = 'Playing via YouTube embed â€” some controls limited';

      // create container for iframe
      const iframe = document.createElement('div');
      iframe.id = 'yt-player';
      iframe.style.width = '100%';
      iframe.style.aspectRatio = '16/9';
      iframe.style.maxHeight = '620px';
      iframe.style.borderRadius = '8px';
      mediaWrap.innerHTML = '';
      mediaWrap.appendChild(iframe);

      // load YouTube IFrame API
      if(!window.YT){
        const tag = document.createElement('script');
        tag.src = 'https://www.youtube.com/iframe_api';
        document.head.appendChild(tag);
      }

      // called by YouTube API when ready
      window.onYouTubeIframeAPIReady = function(){
        const ytPlayer = new YT.Player('yt-player', {
          height: '480',
          width: '100%',
          videoId: youtubeId,
          playerVars: { 'autoplay': 1, 'playsinline': 1, 'rel': 0, 'enablejsapi': 1 },
          events: {
            onReady: function(e){ player = ytPlayer; // set reference to YT player
              try{ ytPlayer.playVideo(); }catch(e){}
              initYouTubeControls(ytPlayer);
            },
            onStateChange: function(e){ updatePlayState(); }
          }
        });
      };

      // initialize controls that work with YT player
      function initYouTubeControls(ytPlayer){
        // volume slider values are 0..100 for YT
        vol.value = 1; // UI shows 0..1, but we'll map
        updateProgressPoll();

        playPauseBtn.addEventListener('click', ()=>{ const state = ytPlayer.getPlayerState(); if(state === YT.PlayerState.PLAYING) ytPlayer.pauseVideo(); else ytPlayer.playVideo(); });
        rewBtn.addEventListener('click', ()=>{ const t = ytPlayer.getCurrentTime(); ytPlayer.seekTo(Math.max(0,t-10), true); });
        fwdBtn.addEventListener('click', ()=>{ const t = ytPlayer.getCurrentTime(); ytPlayer.seekTo(t+10, true); });
        speed.addEventListener('change', ()=>{ ytPlayer.setPlaybackRate(parseFloat(speed.value)); });
        muteBtn.addEventListener('click', ()=>{ if(ytPlayer.isMuted()) ytPlayer.unMute(); else ytPlayer.mute(); updateMuteUI(); });
        vol.addEventListener('input', ()=>{ const v = Math.round(vol.value * 100); ytPlayer.setVolume(v); if(v===0) ytPlayer.mute(); else ytPlayer.unMute(); updateMuteUI(); });

        pipBtn.addEventListener('click', ()=>{ alert('Picture-in-Picture is not supported for YouTube embeds in all browsers. Use fullscreen instead.'); });
        fsBtn.addEventListener('click', ()=>{ mediaWrap.requestFullscreen?.(); });

        progress.addEventListener('click', (e)=>{ const rect = progress.getBoundingClientRect(); const x = e.clientX - rect.left; const pct = x / rect.width; const dur = ytPlayer.getDuration(); ytPlayer.seekTo(pct * dur, true); });

        // keyboard shortcuts
        window.addEventListener('keydown', (e)=>{ if(e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return; if(e.code === 'Space'){ e.preventDefault(); const state = ytPlayer.getPlayerState(); if(state === YT.PlayerState.PLAYING) ytPlayer.pauseVideo(); else ytPlayer.playVideo(); } if(e.key === 'ArrowLeft'){ const t = ytPlayer.getCurrentTime(); ytPlayer.seekTo(Math.max(0,t-5), true); } if(e.key === 'ArrowRight'){ const t = ytPlayer.getCurrentTime(); ytPlayer.seekTo(t+5, true); } if(e.key.toLowerCase() === 'f'){ mediaWrap.requestFullscreen?.(); } if(e.key.toLowerCase() === 'm'){ if(ytPlayer.isMuted()) ytPlayer.unMute(); else ytPlayer.mute(); updateMuteUI(); } });

        function updateProgressPoll(){ if(ytPolling) clearInterval(ytPolling); ytPolling = setInterval(()=>{ try{ const cur = ytPlayer.getCurrentTime(); const dur = ytPlayer.getDuration() || 0; const pct = dur ? (cur/dur)*100 : 0; progressBar.style.width = pct + '%'; timeEl.textContent = formatTime(cur) + ' / ' + formatTime(dur); updatePlayState(); }catch(e){} }, 500); }

        function updatePlayState(){ const state = ytPlayer.getPlayerState(); playPauseBtn.textContent = (state === YT.PlayerState.PLAYING) ? 'Pause' : 'Play'; updateMuteUI(); }
        function updateMuteUI(){ muteBtn.textContent = ytPlayer.isMuted() ? 'ğŸ”ˆ' : 'ğŸ”Š'; const v = ytPlayer.getVolume(); vol.value = (v/100).toString(); }
      }

    } else {
      // Local video element controls
      setupVideoControls(origVideoEl);
    }

    // Generic setup for local HTMLVideoElement
    function setupVideoControls(v){
      player = v;
      // autoplay attempt
      (async function tryAutoplay(){ try{ await player.play(); }catch(e){ player.muted = true; try{ await player.play(); }catch(e){} document.getElementById('meta').textContent = 'Autoplay muted: click to enable sound'; } })();

      playPauseBtn.addEventListener('click', ()=>{ if(player.paused) player.play(); else player.pause(); });
      rewBtn.addEventListener('click', ()=>{ player.currentTime = Math.max(0, player.currentTime - 10); });
      fwdBtn.addEventListener('click', ()=>{ player.currentTime = Math.min(player.duration || 0, player.currentTime + 10); });

      player.addEventListener('play', ()=>{ playPauseBtn.textContent = 'Pause'; });
      player.addEventListener('pause', ()=>{ playPauseBtn.textContent = 'Play'; });

      player.addEventListener('timeupdate', ()=>{ const pct = (player.currentTime / (player.duration || 1)) * 100; progressBar.style.width = pct + '%'; timeEl.textContent = formatTime(player.currentTime) + ' / ' + formatTime(player.duration || 0); });

      progress.addEventListener('click', (e)=>{ const rect = progress.getBoundingClientRect(); const x = e.clientX - rect.left; const pct = x / rect.width; player.currentTime = pct * (player.duration || 0); });

      vol.addEventListener('input', ()=>{ player.volume = vol.value; player.muted = player.volume === 0; updateMuteUI(); });
      muteBtn.addEventListener('click', ()=>{ player.muted = !player.muted; updateMuteUI(); });
      function updateMuteUI(){ muteBtn.textContent = player.muted ? 'ğŸ”ˆ' : 'ğŸ”Š'; vol.value = player.muted ? 0 : player.volume; }

      speed.addEventListener('change', ()=>{ player.playbackRate = parseFloat(speed.value); });

      pipBtn.addEventListener('click', async ()=>{ try{ if(document.pictureInPictureElement) await document.exitPictureInPicture(); else await player.requestPictureInPicture(); }catch(e){ alert('Picture-in-Picture not supported for this video.'); } });

      fsBtn.addEventListener('click', ()=>{ if(!document.fullscreenElement) player.requestFullscreen?.(); else document.exitFullscreen(); });

      // keyboard shortcuts
      window.addEventListener('keydown', (e)=>{ if(e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return; if(e.code === 'Space'){ e.preventDefault(); if(player.paused) player.play(); else player.pause(); } if(e.key === 'ArrowLeft'){ player.currentTime = Math.max(0, player.currentTime - 5); } if(e.key === 'ArrowRight'){ player.currentTime = Math.min(player.duration || 0, player.currentTime + 5); } if(e.key.toLowerCase() === 'f'){ if(!document.fullscreenElement) player.requestFullscreen?.(); else document.exitFullscreen(); } if(e.key.toLowerCase() === 'm'){ player.muted = !player.muted; updateMuteUI(); } });

      // click on video toggles play/pause
      mediaWrap.addEventListener('click', (e)=>{ if(e.target.closest('video')){ if(player.paused) player.play(); else player.pause(); } });
    }

  </script>
</body>
</html>
